{"remainingRequest":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/thread-loader/dist/cjs.js!/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/babel-loader/lib/index.js!/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/TeamGraph.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/TeamGraph.vue","mtime":1569423716896},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\nexport default {\n  name: 'TeamGraph',\n  data: function data() {\n    return {\n      allTeams: [],\n      myTeams: [],\n      name: '',\n      nameState: 'null'\n    };\n  },\n  props: {\n    dataBackgroundColor: {\n      type: String,\n      default: \"\"\n    }\n  },\n  created: function created() {\n    this.getTeams();\n  },\n  methods: {\n    edit: function edit(id) {\n      //FAIRE LE MODAL\n      axios.put('http://localhost:3000/api/teams/' + id, {\n        /*OBJET*/\n      }, {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token')\n        }\n      }).then(function (response) {\n        Swal.fire('Félicitation!', 'Team modifiée avec succès', 'success');\n      }).catch(function (error) {\n        Swal.fire({\n          type: 'error',\n          title: 'Erreur',\n          text: 'Modification impossible'\n        });\n      });\n    },\n    remove: function remove(id) {\n      var _this = this;\n\n      Swal.fire({\n        title: 'Êtes vous sûr de vouloir supprimer cette team ?',\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Oui supprimer'\n      }).then(function (result) {\n        if (result.value) {\n          axios.delete('http://localhost:3000/api/teams/' + id, {\n            headers: {\n              Authorization: 'Bearer ' + localStorage.getItem('token')\n            }\n          }).then(function (response) {\n            _this.getTeams();\n\n            Swal.fire('Supprimé!', 'success');\n          }).catch(function (err) {\n            Swal.fire({\n              type: 'error',\n              title: 'Erreur',\n              text: 'Suppression impossible'\n            });\n            console.log(id);\n          });\n        }\n      });\n    },\n    getTeams: function getTeams() {\n      var _this2 = this;\n\n      axios.get('http://localhost:3000/api/teams', {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token')\n        }\n      }).then(function (response) {\n        _this2.allTeams = response.data;\n\n        if (jwt_decode(localStorage.getItem('token')).role == 'Administrator') {\n          _this2.myTeams = _this2.allTeams;\n        } else if (jwt_decode(localStorage.getItem('token')).role == 'Manager') {\n          for (var i = 0; i < _this2.allTeams.length; i = i + 1) {\n            if (_this2.allTeams[i].managerId == jwt_decode(localStorage.getItem('token')).id) {\n              _this2.myTeams.push(_this2.allTeams[i]);\n            }\n          }\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n};",{"version":3,"sources":["TeamGraph.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <table class=\"table table-striped table-hover\">\n            <thead class=\"thead-dark\">\n                <tr>\n                <th scope=\"col\">Id</th>\n                <th scope=\"col\">Nom de l'équipe</th>\n                <th scope=\"col\">Options</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr v-for=\"{id, name} in myTeams\" :key=\"id\">\n                <td><b>{{ id }}</b></td>\n                <td><b>{{ name }}</b></td>\n                <td><button v-on:click=\"edit\">Editer</button> | <button v-on:click=\"remove(id)\">Supprimer</button></td>\n                </tr>\n            </tbody>\n      </table>\n  </div>\n</template>\n\n<script>\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\n\nexport default {\n\n  name: 'TeamGraph',\n\n  data() {\n    return {\n      allTeams: [],\n      myTeams: [],\n      name: '',\n      nameState: 'null'\n    }\n  },\n  \n  props: {\n    dataBackgroundColor: {\n      type: String,\n      default: \"\"\n    }\n  },\n\n  created() {\n    this.getTeams();\n  },\n\n  methods: {\n    edit(id) {//FAIRE LE MODAL\n      axios.put('http://localhost:3000/api/teams/' + id, {/*OBJET*/}, {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token')\n        }\n      })\n      .then((response) => {\n        Swal.fire(\n                    'Félicitation!',\n                    'Team modifiée avec succès',\n                    'success'\n        )\n      })\n      .catch((error) => {\n          Swal.fire({\n              type: 'error',\n              title: 'Erreur',\n              text: 'Modification impossible'\n          })\n      });\n    },\n\n    remove(id) {\n      Swal.fire({\n                title: 'Êtes vous sûr de vouloir supprimer cette team ?',\n                type: 'warning',\n                showCancelButton: true,\n                confirmButtonColor: '#3085d6',\n                cancelButtonColor: '#d33',\n                confirmButtonText: 'Oui supprimer'\n                }).then((result) => {\n                if (result.value) {\n                    axios.delete('http://localhost:3000/api/teams/' + id, {\n                        headers: {\n                            Authorization: 'Bearer ' + localStorage.getItem('token')\n                        }\n                    }).then(response => {\n                        this.getTeams();\n                        Swal.fire(\n                            'Supprimé!',\n                            'success'\n                        )\n                    }).catch(err => {\n                        Swal.fire({\n                            type: 'error',\n                            title: 'Erreur',\n                            text: 'Suppression impossible'\n                        })\n                        console.log(id);\n                    });\n                }\n            })\n    },\n\n    getTeams() {\n      axios.get('http://localhost:3000/api/teams', {\n      headers: {\n        Authorization: 'Bearer ' + localStorage.getItem('token')\n      }\n    })\n    .then((response) => {\n      this.allTeams = response.data;\n\n      if (jwt_decode(localStorage.getItem('token')).role == 'Administrator') {\n        this.myTeams = this.allTeams;\n      } else if (jwt_decode(localStorage.getItem('token')).role == 'Manager') {\n        for (var i = 0; i < this.allTeams.length; i=i+1) {\n          if (this.allTeams[i].managerId == jwt_decode(localStorage.getItem('token')).id) {\n            this.myTeams.push(this.allTeams[i]);\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n  }\n  }\n};\n</script>\n"],"sourceRoot":"src/pages"}]}
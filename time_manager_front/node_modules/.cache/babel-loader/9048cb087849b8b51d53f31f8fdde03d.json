{"remainingRequest":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/thread-loader/dist/cjs.js!/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/babel-loader/lib/index.js!/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/UserProfile/EditProfileForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/UserProfile/EditProfileForm.vue","mtime":1569423445208},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\nexport default {\n  name: \"EditProfileForm\",\n  props: {\n    dataBackgroundColor: {\n      type: String,\n      default: \"\"\n    }\n  },\n  data: function data() {\n    return {\n      errors: [],\n      currentUser: {},\n      user: {},\n      id: null,\n      lastname: null,\n      firstname: null,\n      email: null,\n      password: null,\n      created_at: null,\n      updated_at: null\n    };\n  },\n  created: function created() {\n    this.fetchData();\n  },\n  methods: {\n    fetchData: function fetchData() {\n      var _this = this;\n\n      axios.get('http://localhost:3000/api/users/' + jwt_decode(localStorage.getItem('token')).id, {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token')\n        }\n      }).then(function (response) {\n        _this.currentUser = response.data;\n        _this.firstname = _this.currentUser.first_name;\n        _this.lastname = _this.currentUser.last_name;\n        _this.email = _this.currentUser.email;\n        _this.password = _this.currentUser.password;\n        _this.updated_at = _this.currentUser.updatedAt;\n        _this.created_at = _this.currentUser.createdAt;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    edit: function edit() {\n      if (this.password == null) {\n        Swal.fire({\n          type: 'error',\n          title: 'Erreur',\n          text: 'Veuillez saisir le mot de passe',\n          footer: 'Merci de réessayez'\n        });\n      } else {\n        this.user.first_name = this.firstname;\n        this.user.last_name = this.lastname;\n        this.user.password = this.password;\n        this.user.email = this.email;\n        console.log(this.currentUser);\n        axios.put('http://localhost:3000/api/users/' + jwt_decode(localStorage.getItem('token')).id, this.user, {\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(function (response) {\n          Swal.fire('Félicitation', 'Profil mis à jour!', 'success');\n        }).catch(function (e) {\n          Swal.fire({\n            type: 'error',\n            title: 'Erreur',\n            text: 'Mise à jour du compte impossible',\n            footer: 'Merci de réessayez'\n          });\n          console.log(e);\n        });\n      }\n    },\n    remove: function remove() {\n      axios.delete('http://localhost:3000/api/users/' + jwt_decode(localStorage.getItem('token')).id).then(function (response) {\n        Swal.fire('COMPTE', 'Votre compte a été supprimé avec succès', 'success'); // REDIRECTION VERS LE LOGIN\n      }).catch(function (error) {\n        Swal.fire({\n          type: 'error',\n          title: 'Erreur',\n          text: 'Suppression de compte impossible',\n          footer: 'Merci de réessayez'\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["EditProfileForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <form>\n    <md-card>\n      <md-card-header :data-background-color=\"dataBackgroundColor\">\n        <h4 class=\"title\">Editez votre profil</h4>\n        <p class=\"category\">Complétez votre profil</p>\n      </md-card-header>\n\n      <md-card-content>\n        <div class=\"md-layout\">\n          <div class=\"md-layout-item md-small-size-100 md-size-33\">\n            <md-field>\n              <label>Prénom</label>\n              <md-input v-model=\"firstname\" type=\"text\"></md-input>\n            </md-field>\n          </div>\n          <div class=\"md-layout-item md-small-size-100 md-size-50\">\n            <md-field>\n              <label>Nom</label>\n              <md-input v-model=\"lastname\" type=\"text\"></md-input>\n            </md-field>\n          </div>\n          <div class=\"md-layout-item md-small-size-100 md-size-100\">\n            <md-field>\n              <label>E-mail</label>\n              <md-input v-model=\"email\" type=\"text\"></md-input>\n            </md-field>\n          </div>\n          <div class=\"md-layout-item md-small-size-100 md-size-100\">\n            <md-field>\n              <label>Mot de passe</label>\n              <md-input v-model=\"password\" type=\"password\" required></md-input>\n            </md-field>\n          </div>\n          <div></div>\n          <div class=\"md-layout-item md-size-100 text-right\">\n            <md-button class=\"md-raised md-success\" v-on:click=\"edit\">Mettre à jour</md-button>\n          </div>\n          <div class=\"md-layout-item md-size-100 text-right\">\n            <md-button class=\"md-raised md-success\" v-on:click=\"remove\">Supprimer votre compte</md-button>\n          </div>\n        </div>\n      </md-card-content>\n    </md-card>\n  </form>\n</template>\n\n\n<script>\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\n\nexport default {\n\n  name: \"EditProfileForm\",\n\n  props: {\n    dataBackgroundColor: {\n      type: String,\n      default: \"\"\n    }\n  },\n\n  data() {\n    return {\n      errors: [],\n      currentUser: {},\n      user: {},\n      id: null,\n      lastname: null,\n      firstname: null,\n      email: null,\n      password: null,\n      created_at: null,\n      updated_at: null,\n    };\n  },\n\n  created() {\n    this.fetchData();\n  },\n\n  methods: {\n    \n    fetchData() {\n      \n      axios.get('http://localhost:3000/api/users/' + jwt_decode(localStorage.getItem('token')).id, {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token')\n        }\n      })\n      .then((response) => {\n          this.currentUser = response.data;\n          this.firstname = this.currentUser.first_name;\n          this.lastname = this.currentUser.last_name;\n          this.email = this.currentUser.email;\n          this.password = this.currentUser.password;\n          this.updated_at = this.currentUser.updatedAt;\n          this.created_at = this.currentUser.createdAt;\n      })\n      .catch((error) => {\n          console.log(error);\n      })\n    },\n\n    edit() {\n\n      if (this.password == null) {\n        Swal.fire({\n          type: 'error',\n          title: 'Erreur',\n          text: 'Veuillez saisir le mot de passe',\n          footer: 'Merci de réessayez'\n        });\n      } else {\n        this.user.first_name = this.firstname;\n      this.user.last_name = this.lastname;\n      this.user.password = this.password;\n      this.user.email = this.email;\n\n      console.log(this.currentUser);\n\n      axios.put('http://localhost:3000/api/users/' + jwt_decode(localStorage.getItem('token')).id, this.user, {\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token')\n        }\n      })\n      .then((response) => {\n          Swal.fire(\n            'Félicitation',\n            'Profil mis à jour!',\n            'success'\n          );\n      })\n      .catch((e) => {\n        Swal.fire({\n          type: 'error',\n          title: 'Erreur',\n          text: 'Mise à jour du compte impossible',\n          footer: 'Merci de réessayez'\n        });\n        console.log(e);\n      })\n      }\n\n      \n    },\n\n    remove() {\n      axios.delete('http://localhost:3000/api/users/' + jwt_decode(localStorage.getItem('token')).id)\n      .then((response) => {\n        Swal.fire(\n          'COMPTE',\n          'Votre compte a été supprimé avec succès',\n          'success'\n        );\n        // REDIRECTION VERS LE LOGIN\n      })\n      .catch((error) => {\n        Swal.fire({\n          type: 'error',\n          title: 'Erreur',\n          text: 'Suppression de compte impossible',\n          footer: 'Merci de réessayez'\n        });\n      })\n    }\n  }\n};\n\n</script>\n"],"sourceRoot":"src/pages/UserProfile"}]}
{"remainingRequest":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/TimeManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/TimeManager.vue","mtime":1569408032798},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport moment from 'moment';\nimport { setInterval, clearInterval } from 'timers';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\n\nexport default {\n    \n    name: 'TimeManager',\n\n    data() {\n        return {\n            today: moment().format('LLLL'),\n            interval: null,\n            chrono: null,\n            arrival: null,\n            departure: null,\n            statusClock: false,\n            finalChrono: null\n        }\n    },\n    created(){\n\n    },\n    methods:{\n        postClock(){\n\n            if (this.chrono == null){\n\n                this.statusClock = true;\n                const now = moment.now();\n                this.arrival = moment().lang('fr').format('LLLL');\n                axios.patch('http://localhost:3000/api/clocks/user/' + localStorage.getItem('id'), {\n                    status: true,\n                    time: this.arrival\n                }, {\n                    headers: {\n                        Autorization: 'Bearer ' + localStorage.getItem('token')\n                    }\n                })\n                .then((response) => {\n                    console.log(response);\n                })\n                .catch((error) => {\n                    console.log(error);\n                });\n                this.interval = setInterval(()=> {\n                    this.chrono = moment(moment().diff(now)).format(\"HH:mm:ss\")\n                }, 1000);\n            }else {\n                this.finalChrono = this.chrono;\n                axios.patch('http://localhost:3000/api/clocks/user/' + localStorage.getItem('id'), {\n                    status: false,\n                    time: moment().lang('fr').format('LLLL')\n                }, {\n                    headers: {\n                        Autorization: 'Bearer ' + localStorage.getItem('token')\n                    }\n                })\n                .then((response) => {\n                    console.log(response);\n                })\n                .catch((error) => {\n                    console.log(error);\n                })\n                this.chrono = null;\n                this.statusClock = false;\n                this.departure = moment().lang('fr').format('LLLL')\n                clearInterval(this.interval);\n                Swal.fire(\"Vous avez travaillez \" + this.finalChrono + \" aujourd'hui\");\n            }\n\n        },\n\n        getClock(){\n            axios.get('http://localhost:3000/api/clocks/'+localStorage.getItem('id'), {headers: {Autorization: \"Bearer \"+localStorage.getItem('token')}})\n            .then(res => console.log(res));\n        }\n    }\n\n\n\n\n\n}\n",{"version":3,"sources":["TimeManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;;;;AAMA","file":"TimeManager.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div>\n        <p> <b>&nbsp;&nbsp;&nbsp;{{ today }}</b></p>\n        <center><b-jumbotron header=\"Pointer\" lead=\"Pensez à pointer à votre arrivé, et dès votre départ\" class=\"center\" border-variant=\"dark\"><br>\n            <b-button variant=\"primary\" v-on:click=\"postClock\" v-if=\"!statusClock\">Départ</b-button>\n            <b-button variant=\"primary\" v-on:click=\"postClock\" v-if=\"statusClock\">{{chrono}} | stop</b-button><br><br>\n            <b><span class=\"float-left\">Arrivé(e): {{ arrival }}</span></b><b><span class=\"float-right\">Parti(e): {{ departure }}</span></b>\n        </b-jumbotron></center><br><br>\n        <b-card bg-variant=\"light\" text-variant=\"dark\" border-variant=\"dark\" title=\"Card Title\">\n            <b-card-text>\n                With supporting text below as a natural lead-in to additional content.\n            </b-card-text>\n            <b-button href=\"#\" variant=\"primary\">Go somewhere</b-button>\n        </b-card>\n    </div>\n</template>\n\n<script>\n\nimport moment from 'moment';\nimport { setInterval, clearInterval } from 'timers';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\n\nexport default {\n    \n    name: 'TimeManager',\n\n    data() {\n        return {\n            today: moment().format('LLLL'),\n            interval: null,\n            chrono: null,\n            arrival: null,\n            departure: null,\n            statusClock: false,\n            finalChrono: null\n        }\n    },\n    created(){\n\n    },\n    methods:{\n        postClock(){\n\n            if (this.chrono == null){\n\n                this.statusClock = true;\n                const now = moment.now();\n                this.arrival = moment().lang('fr').format('LLLL');\n                axios.patch('http://localhost:3000/api/clocks/user/' + localStorage.getItem('id'), {\n                    status: true,\n                    time: this.arrival\n                }, {\n                    headers: {\n                        Autorization: 'Bearer ' + localStorage.getItem('token')\n                    }\n                })\n                .then((response) => {\n                    console.log(response);\n                })\n                .catch((error) => {\n                    console.log(error);\n                });\n                this.interval = setInterval(()=> {\n                    this.chrono = moment(moment().diff(now)).format(\"HH:mm:ss\")\n                }, 1000);\n            }else {\n                this.finalChrono = this.chrono;\n                axios.patch('http://localhost:3000/api/clocks/user/' + localStorage.getItem('id'), {\n                    status: false,\n                    time: moment().lang('fr').format('LLLL')\n                }, {\n                    headers: {\n                        Autorization: 'Bearer ' + localStorage.getItem('token')\n                    }\n                })\n                .then((response) => {\n                    console.log(response);\n                })\n                .catch((error) => {\n                    console.log(error);\n                })\n                this.chrono = null;\n                this.statusClock = false;\n                this.departure = moment().lang('fr').format('LLLL')\n                clearInterval(this.interval);\n                Swal.fire(\"Vous avez travaillez \" + this.finalChrono + \" aujourd'hui\");\n            }\n\n        },\n\n        getClock(){\n            axios.get('http://localhost:3000/api/clocks/'+localStorage.getItem('id'), {headers: {Autorization: \"Bearer \"+localStorage.getItem('token')}})\n            .then(res => console.log(res));\n        }\n    }\n\n\n\n\n\n}\n</script>\n"]}]}
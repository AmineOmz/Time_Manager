{"remainingRequest":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/TeamGraph.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/TeamGraph.vue","mtime":1569595388045},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\n\nexport default {\n\n  name: 'TeamGraph',\n\n  data() {\n    return {\n      admin: null,\n      manager: null,\n      allTeams: [],\n      myTeams: [],\n      name: '',\n      nameState: 'null',\n      teamId: null,\n      teamName: null,\n      managerId: null,\n      nameTeam: null\n    }\n  },\n\n\n  \n  props: {\n    dataBackgroundColor: {\n      type: String,\n      default: \"\"\n    }\n  },\n\n  created() {\n    this.checkRole();\n    this.getTeams();\n  },\n\n  methods: {\n\n    selectedValue(e){\n      this.teamId = e.target.value;\n    },\n\n    checkRole() {\n      if (jwt_decode(localStorage.getItem('token')).role == 'Administrator') {\n        this.admin = true;\n        this.manager = false;\n      } else if (jwt_decode(localStorage.getItem('token')).role == 'Manager') {\n        this.manager = true;\n        this.admin = false;\n      } else {\n        this.admin = false;\n        this.manager = false;\n      }\n    },\n\n    getTeams() {\n      axios.get('http://localhost:3000/api/teams', {\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('token')\n          }\n      })\n      .then((response) => {\n\n          this.allTeams = response.data;\n\n        if (jwt_decode(localStorage.getItem('token')).role == 'Administrator') {\n            this.myTeams = this.allTeams;\n        } else if (jwt_decode(localStorage.getItem('token')).role == 'Manager') {\n            for (var i = 0; i < this.allTeams.length; i++) {\n            if (this.allTeams[i].managerId == jwt_decode(localStorage.getItem('token')).id) {\n              this.myTeams.push(this.allTeams[i]);\n            }\n          }\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n    },\n\n    display() {\n      if (this.teamId == null) {\n        alert('Erreur: aucune team selectionnée');\n      } else {\n        alert('GRAPH DE LA TEAM ID: ' + this.teamId);\n      }\n    },\n  }\n};\n",{"version":3,"sources":["TeamGraph.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TeamGraph.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n\n    <select v-if=\"admin\" id=\"listTeams\">\n        <option>Choisissez une équipe</option>\n        <option v-for=\"team in myTeams\" :key=\"team.id\" :value=\"team.id\" v-on:click=\"selectedValue\">{{ team.name }}</option>\n    </select>\n\n    <select v-if=\"manager\" id=\"listTeams\">\n        <option>Choisissez une équipe</option>\n        <option v-for=\"team in myTeams\" :key=\"team.id\" :value=\"team.id\" v-on:click=\"selectedValue\">{{ team.name }}</option>\n    </select>\n\n    <br><br>\n    <center><button v-on:click=\"display\">Afficher le graph</button></center>\n\n  </div>\n</template>\n\n<script>\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\n\nexport default {\n\n  name: 'TeamGraph',\n\n  data() {\n    return {\n      admin: null,\n      manager: null,\n      allTeams: [],\n      myTeams: [],\n      name: '',\n      nameState: 'null',\n      teamId: null,\n      teamName: null,\n      managerId: null,\n      nameTeam: null\n    }\n  },\n\n\n  \n  props: {\n    dataBackgroundColor: {\n      type: String,\n      default: \"\"\n    }\n  },\n\n  created() {\n    this.checkRole();\n    this.getTeams();\n  },\n\n  methods: {\n\n    selectedValue(e){\n      this.teamId = e.target.value;\n    },\n\n    checkRole() {\n      if (jwt_decode(localStorage.getItem('token')).role == 'Administrator') {\n        this.admin = true;\n        this.manager = false;\n      } else if (jwt_decode(localStorage.getItem('token')).role == 'Manager') {\n        this.manager = true;\n        this.admin = false;\n      } else {\n        this.admin = false;\n        this.manager = false;\n      }\n    },\n\n    getTeams() {\n      axios.get('http://localhost:3000/api/teams', {\n          headers: {\n            Authorization: 'Bearer ' + localStorage.getItem('token')\n          }\n      })\n      .then((response) => {\n\n          this.allTeams = response.data;\n\n        if (jwt_decode(localStorage.getItem('token')).role == 'Administrator') {\n            this.myTeams = this.allTeams;\n        } else if (jwt_decode(localStorage.getItem('token')).role == 'Manager') {\n            for (var i = 0; i < this.allTeams.length; i++) {\n            if (this.allTeams[i].managerId == jwt_decode(localStorage.getItem('token')).id) {\n              this.myTeams.push(this.allTeams[i]);\n            }\n          }\n        }\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n    },\n\n    display() {\n      if (this.teamId == null) {\n        alert('Erreur: aucune team selectionnée');\n      } else {\n        alert('GRAPH DE LA TEAM ID: ' + this.teamId);\n      }\n    },\n  }\n};\n</script>\n\n<style>\n\n#listTeams {\n  width: 80%;\n  display: block;\n  margin: 0 auto;\n}\n</style>\n\n"]}]}
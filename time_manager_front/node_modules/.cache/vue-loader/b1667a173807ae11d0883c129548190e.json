{"remainingRequest":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/UserGraph.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/UserGraph.vue","mtime":1569544356678},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\n\nexport default {\n    name: 'UserGraph',\n\n    data() {\n        return {\n        allTeams: [],\n        myTeams: [],\n        myTeamsContent: [],\n        myUsersOnTeam: [],\n        allMyUsersOnMyTeams: [],\n        users: [],\n        users_manager: [],\n        name: '',\n        nameState: 'null',\n        admin: null,\n        manager: null\n        }\n    },\n\n    created() {\n        this.checkRole();\n        this.getUsers();\n    },\n\n    methods: {\n\n        checkRole() {\n            if (jwt_decode(localStorage.getItem('token')).role == 'Administrator') {\n                this.admin = true;\n            } else if (jwt_decode(localStorage.getItem('token')).role == 'Manager'){\n                this.manager = true;\n                this.admin = false;\n            } else {\n                this.admin = false;\n                this.manager = false;\n            }\n        },\n\n        getUsers() {\n            axios.get('http://localhost:3000/api/users', {\n                headers: {\n                    Authorization: 'Bearer ' + localStorage.getItem('token')\n                }\n            })\n            .then((response) => {\n                this.users = response.data;\n                this.users.splice(0, 1);\n            })\n            .catch((errors) => {\n                console.log(errors);\n            })\n        },\n\n        getTeams() {\n            axios.get('http://localhost:3000/api/teams', {\n                headers: {\n                    Authorization: 'Bearer ' + localStorage.getItem('token')\n                }\n            })\n            .then((response) => {\n                this.allTeams = response.data;\n                for (var i = 0; i < this.allTeams.length; i=i+1) {\n                    if (this.allTeams[i].managerId == jwt_decode(localStorage.getItem('token')).id) {\n                        this.myTeams.push(this.allTeams[i]);\n                    }\n                }\n\n                axios.get('http://localhost:3000/api/teamscontent/team')\n\n            })\n            .catch((errors) => {\n                console.log(errors);\n            });\n        },\n\n        display() {\n            alert('GRAPH');\n        }\n    }\n}\n",{"version":3,"sources":["UserGraph.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"UserGraph.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div>\n        <!-- CASE ADMIN -->\n        <table class=\"table table-striped table-hover\" v-if=\"admin\">\n            <thead class=\"thead-dark\">\n                <tr>\n                    <th scope=\"col\">Id</th>\n                    <th scope=\"col\">Nom</th>\n                    <th scope=\"col\">Pr√©nom</th>\n                    <th scope=\"col\">Email</th>\n                    <th scope=\"col\">Role</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr v-for=\"user in users\" :key=\"user.id\">\n                    <td><b>{{ user.id }}</b></td>\n                    <td><b>{{ user.first_name }}</b></td>\n                    <td><b>{{ user.last_name }}</b></td>\n                    <td><b>{{ user.email }}</b></td>\n                    <td><b>{{ user.role }}</b></td>\n                </tr>\n            </tbody>\n      </table>\n\n      <!-- CASE MANAGER -->\n\n      <table class=\"table table-striped table-hover\" v-if=\"manager\">\n            <thead class=\"thead-dark\">\n                <tr>\n                    <th scope=\"col\">Id</th>\n                    <th scope=\"col\">teamId</th>\n                    <th scope=\"col\">managerId</th>\n                    <th scope=\"col\">Options</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr v-for=\"user_manager in allMyUsersOnMyTeams\" :key=\"user_manager.id\">\n                    <td><b>{{ user_manager.id }}</b></td>\n                    <td><b>{{ user_manager.teamId }}</b></td>\n                    <td><b>{{ user_manager.employeeId }}</b></td>\n                    <td><b>NOM EQUIPE</b></td>\n                    <td><button v-on:click=\"edit(user.id)\">Editer</button> | <button v-on:click=\"remove(user.id)\">Supprimer</button></td>\n                </tr>\n            </tbody>\n      </table>\n\n      <br><br>\n\n      <center><button v-on:click=\"display\">Afficher le graph</button></center>\n\n\n    </div>\n</template>\n\n<script>\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\n\nexport default {\n    name: 'UserGraph',\n\n    data() {\n        return {\n        allTeams: [],\n        myTeams: [],\n        myTeamsContent: [],\n        myUsersOnTeam: [],\n        allMyUsersOnMyTeams: [],\n        users: [],\n        users_manager: [],\n        name: '',\n        nameState: 'null',\n        admin: null,\n        manager: null\n        }\n    },\n\n    created() {\n        this.checkRole();\n        this.getUsers();\n    },\n\n    methods: {\n\n        checkRole() {\n            if (jwt_decode(localStorage.getItem('token')).role == 'Administrator') {\n                this.admin = true;\n            } else if (jwt_decode(localStorage.getItem('token')).role == 'Manager'){\n                this.manager = true;\n                this.admin = false;\n            } else {\n                this.admin = false;\n                this.manager = false;\n            }\n        },\n\n        getUsers() {\n            axios.get('http://localhost:3000/api/users', {\n                headers: {\n                    Authorization: 'Bearer ' + localStorage.getItem('token')\n                }\n            })\n            .then((response) => {\n                this.users = response.data;\n                this.users.splice(0, 1);\n            })\n            .catch((errors) => {\n                console.log(errors);\n            })\n        },\n\n        getTeams() {\n            axios.get('http://localhost:3000/api/teams', {\n                headers: {\n                    Authorization: 'Bearer ' + localStorage.getItem('token')\n                }\n            })\n            .then((response) => {\n                this.allTeams = response.data;\n                for (var i = 0; i < this.allTeams.length; i=i+1) {\n                    if (this.allTeams[i].managerId == jwt_decode(localStorage.getItem('token')).id) {\n                        this.myTeams.push(this.allTeams[i]);\n                    }\n                }\n\n                axios.get('http://localhost:3000/api/teamscontent/team')\n\n            })\n            .catch((errors) => {\n                console.log(errors);\n            });\n        },\n\n        display() {\n            alert('GRAPH');\n        }\n    }\n}\n</script>\n"]}]}
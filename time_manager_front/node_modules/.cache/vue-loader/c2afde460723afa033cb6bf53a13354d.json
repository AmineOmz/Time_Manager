{"remainingRequest":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/UserGraph.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/src/pages/UserGraph.vue","mtime":1569618881716},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/AmineOmz/Bureau/T_DOP_700/front_aut/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#listUsers {\n    width: 80%;\n    display: block;\n    margin: 0 auto;\n}\n",{"version":3,"sources":["UserGraph.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA","file":"UserGraph.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div>\n        <!-- CASE ADMIN -->\n\n        <select v-if=\"admin\" id=\"listUsers\">\n            <option>Choisissez un utilisateur</option>\n            <option v-for=\"user in users\" :key=\"user.id\" :value=\"user.id\" v-on:click=\"selectedValue\">{{ user.first_name }} / {{ user.last_name }} / {{ user.role }}</option>\n        </select>\n        \n\n      <!-- CASE MANAGER \n\n        <select v-if=\"manager\" id=\"listUsers\">\n            <option>Choisissez un utilisateur</option>\n            <option v-for=\"user in myUsersInfo\" :key=\"user.id\" :value=\"user.id\" v-on:click=\"selectedValue\">{{ user.first_name }} / {{ user.last_name }} / {{ user.role }}</option>\n        </select>-->\n\n      \n\n      <br><br>\n\n      <center><button v-on:click=\"display\">Afficher le graph</button></center>\n\n    </div>\n</template>\n\n<script>\n\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport jwt_decode from 'jwt-decode';\n\nexport default {\n    name: 'UserGraph',\n\n    data() {\n        return {\n            // FOR ROLES\n            admin: null,\n            manager: null,\n\n            // CASE ADMIN\n            users: [],\n\n            // CASE MANAGER\n            allTeams: [],\n            myTeams: [],\n            myUsers: [],\n            myUsersInfo: [],\n\n            // FOR ALL\n            userId: null,\n        }\n    },\n\n    created() {\n        this.checkRole();\n        this.getUsers();\n        this.getMyUsers();\n    },\n\n    methods: {\n\n        selectedValue(e) {\n            this.userId = e.target.value;\n        },\n\n        checkRole() {\n            if (jwt_decode(localStorage.getItem('token')).role == 'Administrator') {\n                this.admin = true;\n            } else if (jwt_decode(localStorage.getItem('token')).role == 'Manager'){\n                this.manager = true;\n                this.admin = false;\n            } else {\n                this.admin = false;\n                this.manager = false;\n            }\n        },\n\n        getUsers() {\n            axios.get('http://localhost:3000/api/users', {\n                headers: {\n                    Authorization: 'Bearer ' + localStorage.getItem('token')\n                }\n            })\n            .then((response) => {\n                this.users = response.data;\n                this.users.splice(0, 1);\n            })\n            .catch((errors) => {\n                console.log(errors);\n            })\n        },\n\n        getMyUsers() {\n            // GET ALL TEAMS\n            axios.get('http://localhost:3000/api/teams', {\n                headers: {\n                    Authorization: 'Bearer ' + localStorage.getItem('token')\n                }\n            })\n            .then(response => {\n                this.allTeams.push(response.data)\n            })\n            .catch(errors => {\n                console.log(errors);\n            });\n\n            console.log(this.allTeams);\n\n            // GET MY TEAMS\n            for(var i = 0; i < this.allTeams; i++) {\n                if (this.allTeams[i].managerId == jwt_decode(localStorage.getItem('token')).id) {\n                    this.myTeams.push(this.allTeams[i]);\n                }\n            }\n\n            // CONSOLE MY TEAMS\n            console.log(this.myTeams);\n        },\n\n        display() {\n            if (this.userId == null) {\n                alert('Erreur: aucun utilisateur selectionnÃ©');\n            } else {\n                alert('AFFICHER LE GRAPH DU USER ID: ' + this.userId);\n            }\n            \n        },\n    }\n}\n</script>\n\n<style>\n#listUsers {\n    width: 80%;\n    display: block;\n    margin: 0 auto;\n}\n</style>\n"]}]}